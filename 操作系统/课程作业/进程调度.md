### 1.周转时间和响应时间有什么区别？

首先，关于这两个评价指标的定义：

- **周转时间**是指一个进程从提交到完成的时间间隔。
- 而**响应时间**是指用户提交一个请求开始到接受一个响应之间的时间间隔。

然后，对于来两个评价指标的区别：

- 1.周转时间是面向系统，而响应时间是面向用户的
- 2.周转时间的构成是等待时间、执行时间，其中等待时间是驻内存等待调度时间加上阻塞时间；而响应时间的构成是输入传送时间、处理时间、响应传送时间。

---

### 2.高响应比优先调度算法的主要优点是什么？

高响应比优先调度算法是短进程优先调度算法的改进版，它是不可抢占的调度算法，每次当前进程执行完毕或需要阻塞时，选择就绪队列中响应比最高的进程进行执行。

$$
R_p = \frac{等待时间+要求服务时间}{要求服务时间} = \frac{w+s}{s}
$$

HRRN算法的主要优点：
- 1.实质上是一种动态优先权调度算法
    - 一方面短进程拥有更高的响应比
    - 另一方面等待时间过长的长进程因为较长的等待时间，它的响应比也随之动态调整，因而优先级也随之升高
- 2.既照顾了短进程，也照顾了等待时间过长的长进程

缺点是使用该算法，需要在每次调度之前，先做响应比的计算，要求服务时间是要通过历史服务时间进行预测的，所以这些计算会增加系统开销，并且预测的服务时间并不一定准确。

---

### 3.为什么说多级反馈队列调度算法能较好的满足各种用户的需求？

相比高响应比调度算法采用“奖励短进程”的思想，多级反馈队列调度算法采用的是“惩罚运行时间过长的进程”的思想，设立多级队列来区分不同优先级的进程并且不同队列的时间片随着优先级的降低而增大，根据进程执行历史，执行越长的进程从高优先级队列调整到低优先级队列中，根据时间片论转的抢占式调度算法来对不同优先级就绪队列中的进程进行调度。

多级反馈队列调度算法不仅有较好性能，还能较好满足各种类型用户需求：
- 有利于终端型作业用户
    - 这些作业通常是非常短的作业，具有最高优先级，可以在第一级队列所规定的时间片完成
- 有利于短作业用户
    - 这些较短的作业通常能在前几级队列所规定的时间内完成
- 对于长进程
    - 长进程将依次进入`1,2,...n`个就绪队列中，等待调度执行，随着优先级的下降，分配到的时间片增大，导致抢占的次数减少，也就相应的减少了开销。
    - 但是当不断有新进程到来时，仍然有可能饥饿。


---

### 4.进程A、B、C、D和E到达时间、服务时间如下表所示，试计算分别采用FCFS、RR(q=1)、RR(q=4)、SPN、SRT、HRRN、FB(q=1)、FB(q=2^i)调度算法时，进程A、B、C、D和E的周转时间、带权周转时间，以及平均周转时间、平均带权周转时间，并对结果进行简要分析。



进程 | 到达时间 | 服务时间
:---:|:---:|:---:
A | 0 | 3
B | 2 | 6
C | 4 | 4
D | 6 | 5
E | 8 | 2

#### 1.FCFS先来先服务调度算法：

![GmZ39g.png](https://s1.ax1x.com/2020/03/30/GmZ39g.png)

进程 | 提交时间 | 服务时间 | 完成时间 |周转时间 | 带权周转时间 |
:---:|:---:|:---:|:---:|:---:|:---:
A | 0 | 3 | 3 | 3 | 3 
B | 2 | 6 | 9 | 7 | 7/6 
C | 4 | 4 | 13 | 9 | 9/4 
D | 6 | 5 | 18 | 12 | 12/5
E | 8 | 2 | 20 | 12 | 6

$$
平均周转时间=\frac{3+7+9+12+12}{5}=8.6 \\
平均带权周转时间=\frac{3+7/6+9/4+12/5+6}{5}\approx2.56
$$

#### 2.RR时间片轮转调度算法：

当时间片大小为`1`时：
![GmZJjs.png](https://s1.ax1x.com/2020/03/30/GmZJjs.png)

进程 | 提交时间 | 服务时间 | 完成时间 |周转时间 | 带权周转时间 |
:---:|:---:|:---:|:---:|:---:|:---:
A | 0 | 3 | 4 | 4 | 4/3 
B | 2 | 6 | 18 | 16 | 16/6 
C | 4 | 4 | 17 | 13 | 13/4 
D | 6 | 5 | 20 | 14 | 14/5
E | 8 | 2 | 15 | 7 | 7/2

$平均周转时间=\frac{4+16+13+14+7}{5}=10.8 \\
平均带权周转时间=\frac{4/3+16/6+13/4+14/5+7/2}{5}=2.71$

当时间片大小为`4`时：


![GmZ04U.png](https://s1.ax1x.com/2020/03/30/GmZ04U.png)

进程 | 提交时间 | 服务时间 | 完成时间 |周转时间 | 带权周转时间 |
:---:|:---:|:---:|:---:|:---:|:---:
A | 0 | 3 | 3 | 3 | 3/3 
B | 2 | 6 | 17 | 15 | 15/6 
C | 4 | 4 | 11 | 7 | 7/4 
D | 6 | 5 | 20 | 14 | 14/5
E | 8 | 2 | 19 | 11 | 11/2

$$
平均周转时间=\frac{3+15+7+14+11}{5}=10 \\
平均带权周转时间=\frac{3/3+15/6+7/4+14/5+11/2}{5}=2.71
$$

#### 3.SPN短进程优先调度算法

![GmZcuR.png](https://s1.ax1x.com/2020/03/30/GmZcuR.png)

进程 | 提交时间 | 服务时间 | 完成时间 |周转时间 | 带权周转时间 |
:---:|:---:|:---:|:---:|:---:|:---:
A | 0 | 3 | 3 | 3 | 3/3 
B | 2 | 6 | 9 | 7 | 7/6 
C | 4 | 4 | 15 | 11 | 11/4 
D | 6 | 5 | 20 | 14 | 14/5
E | 8 | 2 | 11 | 3 | 3/2

$$
平均周转时间=\frac{3+7+11+14+3}{5}=7.6 \\
平均带权周转时间=\frac{3/3+7/6+11/4+14/5+3/2}{5}\approx1.84
$$

#### 4.SRT最短剩余时间优先调度算法

![GmZgD1.png](https://s1.ax1x.com/2020/03/30/GmZgD1.png)

进程 | 提交时间 | 服务时间 | 完成时间 |周转时间 | 带权周转时间 |
:---:|:---:|:---:|:---:|:---:|:---:
A | 0 | 3 | 3 | 3 | 3/3 
B | 2 | 6 | 15 | 13 | 13/6 
C | 4 | 4 | 8 | 4 | 4/4 
D | 6 | 5 | 20 | 14 | 14/5
E | 8 | 2 | 10 | 2 | 2/2

$$
平均周转时间=\frac{3+13+4+14+2}{5}=5.2 \\
平均带权周转时间=\frac{3/3+13/6+4/4+14/5+2/2}{5}\approx1.59
$$

#### 5.HRRN高响应比优先调度算法

![GmZfUK.png](https://s1.ax1x.com/2020/03/30/GmZfUK.png)

进程 | 提交时间 | 服务时间 | 完成时间 |周转时间 | 带权周转时间 |
:---:|:---:|:---:|:---:|:---:|:---:
A | 0 | 3 | 3 | 3 | 3/3 
B | 2 | 6 | 9 | 7 | 7/6 
C | 4 | 4 | 13 | 9 | 9/4 
D | 6 | 5 | 20 | 14 | 14/5
E | 8 | 2 | 15 | 7 | 7/2

$$
平均周转时间=\frac{3+7+9+14+7}{5}=8 \\
平均带权周转时间=\frac{3/3+7/6+9/4+14/5+7/2}{5}\approx2.14
$$

#### 6.FB多级反馈队列调度算法

![GmZ5CD.png](https://s1.ax1x.com/2020/03/30/GmZ5CD.png)

当时间片大小为`1`时：

进程 | 提交时间 | 服务时间 | 完成时间 |周转时间 | 带权周转时间 |
:---:|:---:|:---:|:---:|:---:|:---:
A | 0 | 3 | 4 | 4 | 4/3 
B | 2 | 6 | 20 | 18 | 18/6 
C | 4 | 4 | 16 | 12 | 12/4 
D | 6 | 5 | 19 | 13 | 14/5
E | 8 | 2 | 11 | 3 | 3/2


$$
 平均周转时间=\frac{4+18+12+13+3}{5}=10 \\
平均带权周转时间=\frac{4/3+18/6+12/4+14/5+3/2}{5}\approx2.73
$$

当时间片大小为`2^i`时：

进程 | 提交时间 | 服务时间 | 完成时间 |周转时间 | 带权周转时间 |
:---:|:---:|:---:|:---:|:---:|:---:
A | 0 | 3 | 4 | 4 | 4/3 
B | 2 | 6 | 17 | 15 | 15/6 
C | 4 | 4 | 18 | 14 | 14/4 
D | 6 | 5 | 20 | 14 | 14/5
E | 8 | 2 | 14 | 6 | 6/2


$$ 
平均周转时间=\frac{4+15+14+14+6}{5}=10.6 \\
平均带权周转时间=\frac{4/3+15/6+14/4+14/5+6/2}{5}\approx2.63 
$$

#### 分析

通过计算结果，我们可以发现：
- SRT调度算法的平均周转时间和平均加权周转时间都最短，说明它可以使得系统的吞吐量最高，但是它不利于长进程，长进程总是被推迟执行。
- FB调度算法如果时间片设置过小，可以看到各个进程执行的时间很琐碎，将导致较大的进程间切换开销，如果将时间片大小改为`2^i`随着优先级增大而减小的话，一定程度上改善开销大的问题。

